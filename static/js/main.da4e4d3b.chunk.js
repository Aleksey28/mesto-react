(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{18:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),s=n.n(r),c=n(8),i=n.n(c),o=(n(18),n(12)),u=n(3),p=n.p+"static/media/header-logo.ff16f24b.svg";function l(e){var t=e.logo;return Object(a.jsx)("header",{className:"header",children:Object(a.jsx)("a",{href:"#0",children:Object(a.jsx)("img",{src:t,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u041c\u0435\u0441\u0442\u043e.",className:"header__logo"})})})}var d=Object(r.createContext)(),b=n(9),_=n.n(b);function j(e){var t=e.card,n=e.onCardClick,s=e.onCardLike,c=e.onCardDelete,i=Object(r.useContext)(d);return Object(a.jsxs)("li",{className:"card",children:[i._id===t.owner._id&&Object(a.jsx)("button",{className:"card__btn card__btn_action_trush",type:"button",onClick:function(){c(t)}}),Object(a.jsx)("img",{src:t.link,alt:t.name,className:"card__image",onClick:function(){n(t)}}),Object(a.jsxs)("div",{className:"card__footer",children:[Object(a.jsx)("h3",{className:"card__caption",children:t.name}),Object(a.jsxs)("div",{className:"like card__like",children:[Object(a.jsx)("button",{className:_()("like__btn",{like__btn_active:t.likes.some((function(e){return e._id===i._id}))}),onClick:function(){s(t)},type:"button"}),Object(a.jsx)("p",{className:"like__count",title:t.likes.reduce((function(e,t){return e+"".concat(t.name,"\n")}),""),children:t.likes.length})]})]})]})}function m(e){var t=e.onEditAvatar,n=e.onEditProfile,r=e.onAddPlace,c=e.cards,i=e.onCardClick,o=e.onCardLike,u=e.onCardDelete,p=s.a.useContext(d);return Object(a.jsxs)("main",{className:"content",children:[Object(a.jsxs)("section",{className:"profile",children:[Object(a.jsxs)("button",{className:"profile__btn profile__btn_action_edit-avatar",onClick:t,children:[Object(a.jsx)("img",{src:p.avatar,alt:"\u0410\u0432\u0430\u0442\u0430\u0440.",className:"profile__avatar"}),Object(a.jsx)("span",{className:"profile__avatar-overlay"})]}),Object(a.jsxs)("div",{className:"profile__info",children:[Object(a.jsx)("h1",{className:"profile__name",children:p.name}),Object(a.jsx)("button",{className:"profile__btn profile__btn_action_edit",type:"button",onClick:n}),Object(a.jsx)("p",{className:"profile__about",children:p.about})]}),Object(a.jsx)("button",{className:"profile__btn profile__btn_action_add",type:"button",onClick:r})]}),Object(a.jsx)("section",{children:Object(a.jsx)("ul",{className:"cards",children:c.map((function(e){return Object(a.jsx)(j,{card:e,onCardClick:i,onCardLike:o,onCardDelete:u},e._id)}))})})]})}function h(){return Object(a.jsx)("footer",{className:"footer",children:Object(a.jsxs)("p",{className:"footer__copyright",children:["@ ",(new Date).getFullYear()," \u041f\u043e\u043f\u043e\u0432 \u0410\u043b\u0435\u043a\u0441\u0435\u0439"]})})}function f(e){var t=e.title,n=e.name,r=e.isOpen,s=e.isLoad,c=e.onClose,i=e.onSubmit,o=e.submitStates,u=e.children;return Object(a.jsx)("div",{className:"popup popup_type_".concat(n," ").concat(r?"popup_opened":""),name:n,children:Object(a.jsxs)("form",{className:"popup__container popup__container_type_form",name:"container",noValidate:!0,onSubmit:i,children:[Object(a.jsx)("button",{className:"popup__btn popup__btn_action_close",type:"button",onClick:c}),Object(a.jsx)("h2",{className:"popup__title",children:t}),u,Object(a.jsx)("button",{className:"popup__btn popup__btn_action_submit",type:"submit",children:s?o.loading:o.static})]})})}function O(e){var t=e.card,n=e.isOpen,r=e.onClose;return Object(a.jsx)("div",{className:"popup popup_type_show ".concat(n?"popup_opened":""),children:Object(a.jsxs)("div",{className:"popup__container popup__container_type_show",children:[Object(a.jsx)("button",{className:"popup__btn popup__btn_action_close",type:"button",onClick:r}),Object(a.jsx)("img",{src:t.link,alt:t.name,className:"popup__image"}),Object(a.jsx)("h3",{className:"popup__caption",children:t.name})]})})}var x={title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",name:"add",submitStates:{static:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",loading:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435..."}},v={title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",name:"edit",submitStates:{static:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",loading:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435..."}},g={title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",name:"edit-avatar",submitStates:{static:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",loading:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435..."}},k={title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",name:"confirm",submitStates:{static:"\u0414\u0430",loading:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435..."}};function C(e){var t=e.isOpen,n=e.onClose,s=e.onUpdateUser,c=Object(r.useState)(""),i=Object(u.a)(c,2),o=i[0],p=i[1],l=Object(r.useState)(""),b=Object(u.a)(l,2),_=b[0],j=b[1],m=Object(r.useContext)(d);Object(r.useEffect)((function(){m.name&&m.about&&(p(m.name),j(m.about))}),[m]);return Object(a.jsxs)(f,{title:v.title,name:v.name,submitStates:v.submitStates,isOpen:t,isLoad:!1,onClose:n,onSubmit:function(e){e.preventDefault(),s({name:o,about:_})},children:[Object(a.jsx)("input",{type:"text",className:"popup__input popup__input_type_name",name:"name",id:"edit-name-input",value:o,placeholder:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u043f\u0440\u043e\u0444\u0438\u043b\u044f",minLength:"2",maxLength:"40",required:!0,onChange:function(e){p(e.target.value)}}),Object(a.jsx)("span",{className:"popup__error",id:"edit-name-input-error"}),Object(a.jsx)("input",{type:"text",className:"popup__input popup__input_type_about",name:"about",id:"about-input",value:_,placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0444\u0438\u043b\u044f",minLength:"2",maxLength:"200",required:!0,onChange:function(e){j(e.target.value)}}),Object(a.jsx)("span",{className:"popup__error",id:"about-input-error"})]})}function y(e){var t=e.isOpen,n=e.onClose,s=e.onUpdateAvatar,c=Object(r.useRef)();return Object(a.jsxs)(f,{title:g.title,name:g.name,submitStates:g.submitStates,isOpen:t,isLoad:!1,onClose:n,onSubmit:function(e){e.preventDefault(),s({link:c.current.value})},children:[Object(a.jsx)("input",{ref:c,type:"url",className:"popup__input popup__input_type_link",name:"link",id:"link-input-edit",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0}),Object(a.jsx)("span",{className:"popup__error",id:"link-input-edit-error"})]})}function N(e){var t=e.isOpen,n=e.onClose,s=e.onAddPlace,c=Object(r.useState)(""),i=Object(u.a)(c,2),o=i[0],p=i[1],l=Object(r.useState)(""),d=Object(u.a)(l,2),b=d[0],_=d[1];return Object(a.jsxs)(f,{title:x.title,name:x.name,submitStates:x.submitStates,isOpen:t,isLoad:!1,onClose:n,onSubmit:function(e){e.preventDefault(),s({name:o,link:b})},children:[Object(a.jsx)("input",{type:"text",className:"popup__input popup__input_type_name",name:"name",id:"add-name-input",value:o,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",minLength:"2",maxLength:"30",required:!0,onChange:function(e){p(e.target.value)}}),Object(a.jsx)("span",{className:"popup__error",id:"add-name-input-error"}),Object(a.jsx)("input",{type:"url",className:"popup__input popup__input_type_link",name:"link",id:"link-input-add",value:b,placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,onChange:function(e){_(e.target.value)}}),Object(a.jsx)("span",{className:"popup__error",id:"link-input-add-error"})]})}var S=n(2),w=n.n(S),L=n(4),P=n(10),E=n(11),D=new(function(){function e(t){var n=t.baseUrl,a=t.headers;Object(P.a)(this,e),this._baseUrl=n,this._headers=a}return Object(E.a)(e,[{key:"_getProxy",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a={method:t,headers:this._headers};return n&&(a.body=n),fetch("".concat(this._baseUrl).concat(e),a)}},{key:"_handleResponse",value:function(){var e=Object(L.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(n=e.sent,!t.ok){e.next=7;break}return e.abrupt("return",n);case 7:return e.abrupt("return",Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(t.status,"\n\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435: ").concat(n.message)));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserData",value:function(){var e=Object(L.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getProxy("/users/me","GET");case 2:return t=e.sent,e.next=5,this._handleResponse(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setUserData",value:function(){var e=Object(L.a)(w.a.mark((function e(t){var n,a,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,a=t.about,e.next=3,this._getProxy("/users/me","PATCH",JSON.stringify({name:n,about:a}));case 3:return r=e.sent,e.next=6,this._handleResponse(r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setAvatar",value:function(){var e=Object(L.a)(w.a.mark((function e(t){var n,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.link,e.next=3,this._getProxy("/users/me/avatar","PATCH",JSON.stringify({avatar:n}));case 3:return a=e.sent,e.next=6,this._handleResponse(a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCardList",value:function(){var e=Object(L.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getProxy("/cards","GET");case 2:return t=e.sent,e.next=5,this._handleResponse(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addCard",value:function(){var e=Object(L.a)(w.a.mark((function e(t){var n,a,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,a=t.link,e.next=3,this._getProxy("/cards","POST",JSON.stringify({name:n,link:a}));case 3:return r=e.sent,e.next=6,this._handleResponse(r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteCard",value:function(){var e=Object(L.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getProxy("/cards/".concat(t),"DELETE");case 2:return n=e.sent,e.next=5,this._handleResponse(n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toggleCardLike",value:function(){var e=Object(L.a)(w.a.mark((function e(t,n){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getProxy("/cards/likes/".concat(t),n?"PUT":"DELETE");case 2:return a=e.sent,e.next=5,this._handleResponse(a);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-16",headers:{authorization:"fcd9a632-5cad-436c-b58e-4c80d498006a","Content-Type":"application/json"}});var U=function(){var e=s.a.useState(!1),t=Object(u.a)(e,2),n=t[0],r=t[1],c=s.a.useState(!1),i=Object(u.a)(c,2),b=i[0],_=i[1],j=s.a.useState(!1),x=Object(u.a)(j,2),v=x[0],g=x[1],S=s.a.useState(!1),w=Object(u.a)(S,2),L=w[0],P=w[1],E=s.a.useState(!1),U=Object(u.a)(E,2),A=U[0],T=U[1],R=s.a.useState({}),q=Object(u.a)(R,2),F=q[0],J=q[1],B=s.a.useState({}),G=Object(u.a)(B,2),H=G[0],I=G[1],z=s.a.useState([]),M=Object(u.a)(z,2),V=M[0],Y=M[1];s.a.useEffect((function(){D.getCardList().then((function(e){Y(e)})).catch((function(e){console.log(e)}))}),[]),s.a.useEffect((function(){D.getUserData().then((function(e){I(e)})).catch(console.log)}),[]);var K=function(){g(!1),r(!1),_(!1),P(!1),T(!1)};return Object(a.jsx)(d.Provider,{value:H,children:Object(a.jsxs)("div",{className:"page",children:[Object(a.jsx)(l,{logo:p}),Object(a.jsx)(m,{onEditProfile:function(){r(!0)},onAddPlace:function(){_(!0)},onEditAvatar:function(){g(!0)},cards:V,onCardClick:function(e){T(!0),J(e)},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===H._id}));D.toggleCardLike(e._id,!t).then((function(t){var n=V.map((function(n){return n._id===e._id?t:n}));Y(n)})).catch(console.log)},onCardDelete:function(e){D.deleteCard(e._id).then((function(){var t=V.filter((function(t){return t._id!==e._id}));Y(t)})).catch(console.log)}}),Object(a.jsx)(h,{}),Object(a.jsx)(N,{isOpen:b,onClose:K,onAddPlace:function(e){D.addCard(e).then((function(e){Y([e].concat(Object(o.a)(V))),K()})).catch(console.log)}}),Object(a.jsx)(C,{isOpen:n,onClose:K,onUpdateUser:function(e){D.setUserData(e).then((function(e){I(e),K()})).catch(console.log)}}),Object(a.jsx)(y,{isOpen:v,onClose:K,onUpdateAvatar:function(e){D.setAvatar(e).then((function(e){I(e),K()})).catch(console.log)}}),Object(a.jsx)(f,{title:k.title,name:k.name,submitStates:k.submitStates,isOpen:L,isLoad:!1,onClose:K}),Object(a.jsx)(O,{card:F,isOpen:A,onClose:K})]})})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,21)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))};i.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(U,{})}),document.getElementById("root")),A()}},[[20,1,2]]]);
//# sourceMappingURL=main.da4e4d3b.chunk.js.map